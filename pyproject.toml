[tool.poetry]
name = "ephios"
version = "0.12.0"
description = "ephios is a tool to manage shifts for medical services."
authors = ["Julian Baumann <julian@ephios.de>", "Felix Rindt <felix@ephios.de>"]
license = "MIT"
readme = "README.md"
homepage = "https://ephios.de"
repository = "https://github.com/ephios-dev/ephios"
documentation = "https://docs.ephios.de/en/stable/"

[tool.poetry.dependencies]
python = "^3.8"
django = ">=4.0,<4.1"
django-environ = ">=0.4.5,<0.10.0"
django-guardian = "^2.3.0"
django-ical = "^1.7.1"
django-polymorphic = "^3.0.0"
django-select2 = "^7.4.2"
reportlab = "^3.5.51"
django-formset-js-improved = "^0.5.0"
django-csp = "^3.7"
bleach = ">=3.2.1,<6.0.0"
markdown = "^3.2.2"

psycopg2 = {version = "^2.8.6", optional = true}
mysqlclient = {version = "^2.0.1", optional = true}
django-redis = {version = ">=4.12.1,<6.0.0", optional = true}
django-compressor = ">=2.4,<5.0"
django-statici18n = "^2.0.1"
django-dynamic-preferences = "^1.11.0"
django-crispy-forms = "^1.11.1"
django-webpush = "^0.3.3"
importlib-metadata = { version = ">=3.7.3,<5.0.0", python = "<3.9" }
django-libsass = ">=0.8,<0.10"
crispy-bootstrap5 = ">=0.4,<0.7"
djangorestframework = "^3.12.4"
django-coverage-plugin = "^2.0.1"
django-filter = ">=21.1,<23.0"
djangorestframework-guardian = "^0.3.0"
uritemplate = "^4.1.1"

[tool.poetry.extras]
pgsql = ["psycopg2"]
mysql = ["mysqlclient"]
redis = ["django-redis"]

[tool.poetry.dev-dependencies]
black = "^22.6"
pre-commit = "^2.19.0"
django-debug-toolbar = "^3.5"
pytest-django = "^4.5.2"
django-webtest = "^1.9.9"
django-extensions = "^3.1.5"
coverage = "^6.4"
coveralls = "^3.3.1"
django-coverage-plugin = "^2.0.1"
isort = "^5.10.1"
pylint = "^2.14.4"
autoflake = "^1.4"
Sphinx = "^5.0.2"
sphinx-rtd-theme = "^1.0.0"
sphinx-intl = "^2.0.1"
sphinx-github-changelog = "^1.2.0"

[tool.black]
line-length = 100
# https://github.com/psf/black/blob/master/docs/compatible_configs.md

[tool.isort]
multi_line_output = 3
include_trailing_comma = true
force_grid_wrap = 0
use_parentheses = true
ensure_newline_before_comments = true
line_length = 100

[tool.pylint.messages_control]
# C0330 and C0301 are disabled for use of black
disable = """C0301,
duplicate-code, attribute-defined-outside-init, missing-module-docstring, missing-class-docstring,
no-member, invalid-name, import-outside-toplevel, unused-argument, too-many-ancestors, missing-function-docstring,
too-few-public-methods, too-many-arguments, cyclic-import, inconsistent-return-statements,
useless-object-inheritance, logging-fstring-interpolation
"""

[tool.pylint.format]
max-line-length = "100"

[tool.pytest.ini_options]
DJANGO_SETTINGS_MODULE = "tests.settings"
addopts = "--fail-on-template-vars"

[build-system]
requires = ["poetry>=0.12"]
build-backend = "poetry.masonry.api"


[tool.coverage.run]
plugins = [
    'django_coverage_plugin',
]
include = ['ephios/*.py', 'ephios/*.html']
branch = true

[tool.coverage.django_coverage_plugin]
template_extensions = 'html, txt, tex, email'
